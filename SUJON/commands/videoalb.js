const axios = require("axios"); module.exports.config = { name: "album", version: "1.0.0", hasPermission: 0, credits: "Shaon × Ullash (modded)", description: "Send a video from specific category via album API", commandCategory: "media", usages: "", cooldowns: 5 }; module.exports.run = async function({ event, api }) { const menu = ` ╭─── 🎥 𝙰𝙻𝙱𝚄𝙼 𝚅𝙸𝙳𝙴𝙾 ───╮ 1️⃣ Islamic 2️⃣ Anime 3️⃣ Shairi 4️⃣ Short 5️⃣ Sad 6️⃣ Status 7️⃣ Football 8️⃣ Funny 9️⃣ Love 🔟 CPL 1️⃣1️⃣ Baby 1️⃣2️⃣ Free Fire 1️⃣3️⃣ Lofi 1️⃣4️⃣ Happy 1️⃣5️⃣ Humayun Sir 🔁 Reply a number to get video. `; return api.sendMessage(menu, event.threadID, (err, info) => { global.client.handleReply.push({ name: module.exports.config.name, messageID: info.messageID, author: event.senderID, type: "choose" }); }, event.messageID); }; module.exports.handleReply = async function({ api, event, handleReply }) { if (event.senderID !== handleReply.author) return; const categories = { "1": "islamic", "2": "anime", "3": "shairi", "4": "short", "5": "sad", "6": "status", "7": "football", "8": "funny", "9": "love", "10": "cpl", "11": "baby", "12": "ff", "13": "lofi", "14": "happy", "15": "humayun" }; const choice = event.body.trim(); const selectedCategory = categories[choice]; if (!selectedCategory) { return api.sendMessage("😒Invalid choice. Please reply with a number from the menu.", event.threadID, event.messageID); } try { const apiUrl = `http://194.164.125.5:6190/album?type=${selectedCategory}`; const response = await axios.get(apiUrl); const videoUrl = response.data.data; if (!videoUrl) throw new Error("No video returned"); const videoStream = (await axios.get(videoUrl, { responseType: "stream" })).data; return api.sendMessage({ body: `✨ Here's your ${selectedCategory} video 🎥`, attachment: videoStream }, event.threadID, event.messageID); } catch (err) { console.error("Video fetch error:", err.message); return api.sendMessage("❌ Failed to fetch video. Try again later.", event.threadID, event.messageID); } };
